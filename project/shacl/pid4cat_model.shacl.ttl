@prefix dcat1: <https://www.w3.org/ns/dcat#> .
@prefix dcmitype: <http://purl.org/dc/dcmitype/> .
@prefix dcterms1: <https://purl.org/dc/terms/> .
@prefix pid4cat_model: <https://w3id.org/nfdi4cat/pid4cat-model/> .
@prefix prov1: <https://www.w3.org/ns/prov#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

pid4cat_model:HandleRecordContainer a sh:NodeShape ;
    sh:closed true ;
    sh:description "A container for all HandleRecords." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class pid4cat_model:HandleAPIRecord ;
            sh:description "The HandleRecords contained in the container." ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 0 ;
            sh:path pid4cat_model:contains_pids ] ;
    sh:targetClass pid4cat_model:HandleRecordContainer .

pid4cat_model:LogRecord a sh:NodeShape ;
    sh:closed true ;
    sh:description "A log record for changes made on a PID4CatRecord starting from registration." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class prov1:Agent ;
            sh:description "The person who registered or modified the PID record." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 1 ;
            sh:path pid4cat_model:has_agent ],
        [ sh:datatype <xsd:string> ;
            sh:description "A human-readable description for a resource." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 3 ;
            sh:path pid4cat_model:description ],
        [ sh:datatype <xsd:dateTime> ;
            sh:description "The date and time of a log record." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path pid4cat_model:datetime_log ],
        [ sh:description "The field that was changed" ;
            sh:in ( "STATUS" "LANDING_PAGE" "RESOURCE_INFO" "RELATED_IDS" "CONTACT" "LICENSE" ) ;
            sh:maxCount 1 ;
            sh:order 2 ;
            sh:path pid4cat_model:changed_field ] ;
    sh:targetClass pid4cat_model:LogRecord .

pid4cat_model:PID4CatRelation a sh:NodeShape ;
    sh:closed true ;
    sh:description "A relation between PID4CatRecords or between a PID4CatRecord and other resources with a PID." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:description "Relation type between the resources." ;
            sh:in ( "IS_CITED_BY" "CITES" "IS_SUPPLEMENT_TO" "IS_SUPPLEMENTED_BY" "IS_CONTINUED_BY" "CONTINUES" "HAS_METADATA" "IS_METADATA_FOR" dcterms1:hasVersion dcterms1:isVersionOf "IS_NEW_VERSION_OF" "IS_PREVIOUS_VERSION_OF" dcterms1:isPartOf dcterms1:hasPart "IS_DESCRIBED_BY" "DESCRIBES" "IS_PUBLISHED_IN" dcterms1:isReferencedBy "REFERENCES" "IS_DOCUMENTED_BY" "DOCUMENTS" "IS_COMPILED_BY" "COMPILES" "IS_VARIANT_FORM_OF" "IS_ORIGINAL_FORM_OF" "IS_IDENTICAL_TO" "IS_DERIVED_FROM" "IS_SOURCE_OF" "IS_COLLECTED_BY" "COLLECTS" dcterms1:isRequiredBy dcterms1:requires "IS_OBSOLETED_BY" "OBSOLETES" ) ;
            sh:maxCount 1 ;
            sh:order 0 ;
            sh:path pid4cat_model:relation_type ],
        [ sh:datatype <xsd:dateTime> ;
            sh:description "The date and time of a log record." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 2 ;
            sh:path pid4cat_model:datetime_log ],
        [ sh:datatype <xsd:anyURI> ;
            sh:description "Related identifiers for the resource." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path pid4cat_model:related_identifier ] ;
    sh:targetClass pid4cat_model:PID4CatRelation .

pid4cat_model:ResourceInfo a sh:NodeShape ;
    sh:closed true ;
    sh:description "Data object to hold information about the resource and its representation." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype <xsd:string> ;
            sh:description "A human-readable name for a resource." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path pid4cat_model:label ],
        [ sh:datatype <xsd:string> ;
            sh:description "A human-readable description for a resource." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path pid4cat_model:description ],
        [ sh:description "The category of the resource." ;
            sh:in ( dcmitype:Collection sosa:Sample "MATERIAL" "DEVICE" dcat1:dataset dcat1:DataService ) ;
            sh:maxCount 1 ;
            sh:order 2 ;
            sh:path pid4cat_model:resource_category ],
        [ sh:class pid4cat_model:RepresentationVariant ;
            sh:description "The representations of the resource in other media types than text/html." ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 3 ;
            sh:path pid4cat_model:representation_variants ] ;
    sh:targetClass pid4cat_model:ResourceInfo .

pid4cat_model:HandleAPIRecord a sh:NodeShape ;
    sh:closed true ;
    sh:description "A handle record for a PID4CatRecord." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype <xsd:integer> ;
            sh:description "The response code of the handle API." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path pid4cat_model:response_code ],
        [ sh:datatype <xsd:string> ;
            sh:description "The handle of the PID4CatRecord." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path pid4cat_model:handle ],
        [ sh:class pid4cat_model:HandleRecord ;
            sh:description "The values of the PID4CatRecord." ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 2 ;
            sh:path pid4cat_model:values ] ;
    sh:targetClass pid4cat_model:HandleAPIRecord .

pid4cat_model:HandleData a sh:NodeShape ;
    sh:closed true ;
    sh:description "The data element in the handle API." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype <xsd:string> ;
            sh:description "The format of the handle data." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path pid4cat_model:format ],
        [ sh:datatype <xsd:string> ;
            sh:description "The value of the handle data." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path pid4cat_model:value ] ;
    sh:targetClass pid4cat_model:HandleData .

pid4cat_model:HandleRecord a sh:NodeShape ;
    sh:closed true ;
    sh:description "A handle record for a PID4CatRecord." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype <xsd:integer> ;
            sh:description """A time to live in seconds for the handle record. Typically: 86400 => 1 day
TODO: Research details of ttl meaning for handle API.
""" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 3 ;
            sh:path pid4cat_model:ttl ],
        [ sh:datatype <xsd:dateTime> ;
            sh:description "The iso datetime for the last update of the handle data." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 4 ;
            sh:path pid4cat_model:timestamp ],
        [ sh:class pid4cat_model:HandleData ;
            sh:description "The meta data stored in PID4CatRecord." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:BlankNodeOrIRI ;
            sh:order 2 ;
            sh:path pid4cat_model:data ],
        [ sh:description "The type of the handle record." ;
            sh:in ( "URL" "STATUS" "SCHEMA_VER" "LICENSE" "EMAIL" "RESOURCE_INFO" "RELATED" "LOG" ) ;
            sh:maxCount 1 ;
            sh:order 1 ;
            sh:path pid4cat_model:type ],
        [ sh:datatype <xsd:integer> ;
            sh:description "The index of the handle record." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path pid4cat_model:index ] ;
    sh:targetClass pid4cat_model:HandleRecord .

pid4cat_model:RepresentationVariant a sh:NodeShape ;
    sh:closed true ;
    sh:description "A representation of the resource in other media types than text/html which is the default for landing_page_url." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype <xsd:string> ;
            sh:description "The encoding of the representation. https://encoding.spec.whatwg.org/#names-and-labels" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 2 ;
            sh:path pid4cat_model:encoding_format ],
        [ sh:datatype <xsd:integer> ;
            sh:description "The size of the representation in bytes." ;
            sh:maxCount 1 ;
            sh:minInclusive 0 ;
            sh:nodeKind sh:Literal ;
            sh:order 3 ;
            sh:path pid4cat_model:size ],
        [ sh:datatype <xsd:string> ;
            sh:description "The media type of the representation as defined by [IANA](https://www.iana.org/assignments/media-types/media-types.xhtml)" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path pid4cat_model:media_type ],
        [ sh:datatype <xsd:anyURI> ;
            sh:description "The URL of the representation." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path pid4cat_model:url ] ;
    sh:targetClass pid4cat_model:RepresentationVariant .

prov1:Agent a sh:NodeShape ;
    sh:closed true ;
    sh:description "Person who plays a role relative to PID creation or curation." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype <xsd:anyURI> ;
            sh:description "The ROR of the agent's affiliation." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 3 ;
            sh:path pid4cat_model:affiliation_ror ],
        [ sh:datatype <xsd:string> ;
            sh:description "Email address of the agent that created or modified the PID record." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path pid4cat_model:email ;
            sh:pattern "^\\S+@[\\S+\\.]+\\S+" ],
        [ sh:datatype <xsd:string> ;
            sh:description "The ORCID of the person" ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 2 ;
            sh:path pid4cat_model:orcid ],
        [ sh:datatype <xsd:string> ;
            sh:description "The name of the agent that created or modified the PID record." ;
            sh:maxCount 1 ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path pid4cat_model:name ],
        [ sh:description "The role of the agent relative to the resource" ;
            sh:in ( "TRUSTEE" "OWNER" ) ;
            sh:maxCount 1 ;
            sh:order 4 ;
            sh:path pid4cat_model:role ] ;
    sh:targetClass prov1:Agent .

