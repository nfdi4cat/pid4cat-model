---
id: https://w3id.org/nfdi4cat/pid4cat-model
name: pid4cat-model
title: pid4cat-model
description: >-
  A LinkML model for PIDs for resources in catalysis (PID4Cat). PID4Cat is a
  handle system based persistent identifier (PID) for digital or physical
  resources used in the catalysis research process. The handle record is used
  to store additional metadata about the PID besides the obligatory landing page URL.

  The model describes metadata for the PID itself and how to access the
  identified resource. It does not describe the resource itself with the
  exception of the resource category, which is a high-level description of
  what is identified by the PID4Cat handle, e.g. a sample or a device.

todos:
  - Refine slots in slot_usage of class instead of globally in slot definitions
  - Check and add mappings to other ontologies. (classes, slots, enums)
  - Add ranges (types information) to slots

license: MIT
see_also:
  - https://nfdi4cat.github.io/pid4cat-model

prefixes:
  pid4cat_model: https://w3id.org/nfdi4cat/pid4cat-model/
  linkml: https://w3id.org/linkml/
  dcterms: https://purl.org/dc/terms/
  dcat: https://www.w3.org/ns/dcat#
  DataCite: https://purl.org/spar/datacite/
  prov: https://www.w3.org/ns/prov#

default_prefix: pid4cat_model

imports:
  - linkml:types
  - media_types

# This is only added to prevent triggering a gen-doc bug for a slot
# using "exactly_one_of" to selcect the range of the value slot.
# related issue https://github.com/linkml/linkml/issues/2283
default_range: string

classes:

  # classes for mapping to handle API

  HandleAPIRecord:
    description: >-
      A handle record for a PID4CatRecord.
    slots:
      - response_code
      - handle
      - values
    #slot_usage:  # to be activated after agreement on allowed values
    #  handle:
    #    pattern: "^\\d+/\\d+$"

  HandleRecord:
    description: >-
      A handle record for a PID4CatRecord.
    slots:
      - index
      - type
      - data
      - ttl
      - timestamp

  HandleData:
    description: >-
      The data element in the handle API.
    slots:
      - format
      - value

  HandleRecordContainer:
    description: >-
      A container for all HandleRecords.
    tree_root: true
    attributes:
      contains_pids:
        multivalued: true
        inlined_as_list: true
        range: HandleAPIRecord
        description: >-
          The HandleRecords contained in the container.

  PID4CatRelation:
    description: >-
      A relation between PID4CatRecords or between a PID4CatRecord and other
      resources with a PID.
    slots:
      - relation_type
      - related_identifier
      - datetime_log

  ResourceInfo:
    description: >-
      Data object to hold information about the resource and its representation.
    slots:
      - label
      - description
      - resource_category
      - representation_variants

  LogRecord:
    description: >-
      A log record for changes made on a PID4CatRecord starting from registration.
    slots:
      - datetime_log
      - has_agent
      - changed_field
      - description

  Agent:
    class_uri: prov:Agent
    description: Person who plays a role relative to PID creation or curation.
    slots:
      - name
      - email
      - orcid
      - affiliation_ror
      - role
    slot_usage:
      email:
        pattern: "^\\S+@[\\S+\\.]+\\S+"

  RepresentationVariant:
    description: A representation of the resource in other media types than
      text/html which is the default for landing_page_url.
    slots:
      - url
      - media_type
      - encoding_format
      - size

slots:

  # Slots for HandleAPIRecord
  response_code:
    range: integer
    alias: responseCode
    description: The response code of the handle API.
  handle:
    range: string
    description: The handle of the PID4CatRecord.
  values:
    range: HandleRecord
    multivalued: true
    description: The values of the PID4CatRecord.

  # Slots for HandleRecord
  index:
    range: integer
    description: The index of the handle record.
  type:
    range: HandleDataType
    description: The type of the handle record.
  data:
    range: HandleData
    description: The meta data stored in PID4CatRecord.
  ttl:
    range: integer
    description: |
      A time to live in seconds for the handle record. Typically: 86400 => 1 day
      TODO: Research details of ttl meaning for handle API.
  timestamp:
    range: datetime
    description: The iso datetime for the last update of the handle data.

  # Slots for HandleData
  format:
    range: string
    description: The format of the handle data.
  value:
    description: The value of the handle data.
    exactly_one_of:
      - range: PID4CatStatus
      - range: string  # pid_schema_version, license, curation_contact_email
      - range: PID4CatRelation
      - range: ResourceInfo
      - range: PID4CatRelation
      - range: LogRecord

  # Slots for PID4CatRecord
  id:
    identifier: true
    slot_uri: schema:identifier
    range: uriorcurie
    description: A unique identifier for a thing.
  landing_page_url:
    rank: 10
    slot_uri: schema:url
    range: uri
    description: The URL of the landing page for the resource.
  status:
    range: PID4CatStatus
    description: >-
      The status of the PID4CatRecord.
  pid_schema_version:
    range: string
    description: The version of the PID4Cat schema used for the PID4CatRecord.
  resource_info:
    range: ResourceInfo
    description: Information about the resource.
  related_identifiers:
    range: PID4CatRelation
    multivalued: true
    description: Relations of the resource to other identifiers.
  license:
    range: string
    description: The license for the metadata contained in the PID4Cat record.
  curation_contact_email:
    range: string
    description: >-
      The email address of a person or institution currently responsible for the
      curation of the PID record.
  change_log:
    range: LogRecord
    required: true
    multivalued: true
    description: Change log of PID4Cat record.

  # Slots for PID4CatRelation
  relation_type:
    range: RelationType
    description: Relation type between the resources.
  related_identifier:
    range: uri
    description: Related identifiers for the resource.
  datetime_log:
    range: datetime
    description: The date and time of a log record.

  # Slots for ResourceInfo
  label:
    range: string
    description: A human-readable name for a resource.
  description:
    range: string
    description: A human-readable description for a resource.
  resource_category:
    range: ResourceCategory
    description: The category of the resource.
  representation_variants:
    range: RepresentationVariant
    multivalued: true
    description: >-
      The representations of the resource in other media types than text/html.

  # Slots for LogRecord
  changed_field:
    range: ChangeLogField
    description: The field that was changed
  has_agent:
    range: Agent
    description: The person who registered or modified the PID record.
    # datetime_log is already defined in PID4CatRelation

  # Slots for Agent
  name:
    range: string
    description: The name of the agent that created or modified the PID record.
  email:
    range: string
    description: Email address of the agent that created or modified the PID record.
  orcid:
    range: string
    description: The ORCID of the person
  affiliation_ror:
    range: uri
    description: The ROR of the agent's affiliation.
  role:
    range: PID4CatAgentRole
    description: The role of the agent relative to the resource

  # Slots for RepresentationVariants
  media_type:
    range: MEDIA_Types
    description: >-
      The media type of the representation as defined by [IANA](https://www.iana.org/assignments/media-types/media-types.xhtml)
  encoding_format:
    range: string
    description: >-
      The encoding of the representation. https://encoding.spec.whatwg.org/#names-and-labels
  size:
    range: integer
    minimum_value: 0
    description: The size of the representation in bytes.
  url:
    range: uri
    description: The URL of the representation.

enums:  # Enumerations use singular form for names

  ResourceCategory:
    description: >-
      The category of the resource
    permissible_values:
      # Should be taken from DCMI Type Vocabulary if possible.
      # https://www.dublincore.org/specifications/dublin-core/dcmi-terms/#section-7
      COLLECTION:
        description: A collection is a group of resources and/or other collections.
        meaning: http://purl.org/dc/dcmitype/Collection
      SAMPLE:
        description: >-
          A representative part of an entity of interest on which observations may
          be made.
        meaning: http://www.w3.org/ns/sosa/Sample
      MATERIAL:
        description: A material used in the research process (except samples).
        # TODO meaning:...
        todos:
          - map to an ontology/vocabulary
      DEVICE:
        description: A physical device used in the research process.
        # TODO meaning:...
        todos:
          - map to an ontology/vocabulary
      DATA_OBJECT:
        description: >-
          A collection of data available for access or download.
          A data set might be a data file, a data set, a data collection.
        meaning: dcat:dataset
      DATA_SERVICE:
        description: >-
          An organized system of operations that provide data processing
          functions or access to datasets.
        meaning: dcat:DataService

  RelationType:
    description: >-
      The type of the relation between the resources
    permissible_values:
      # We adapt nearly all DataCite relations (Metadata Schema V 4.5) with
      # the exception of:  IsReviewedBy, Reviews

      # FYI: IGSN used only the relations isCitedBy, isPartOf, hasPart,
      #   isReferencedBy, references, isDocumentedBy, documents,
      #   isCompiledBy, compiles, isVariantFormOf, isOriginalFormOf

      IS_CITED_BY:
        description: The resource is cited by another resource.
        todos:
          - map to an ontology/vocabulary
      CITES:
        description: The resource cites another resource.
        todos:
          - map to an ontology/vocabulary
      IS_SUPPLEMENT_TO:
        description: The resource is supplemented by another resource.
        todos:
          - map to an ontology/vocabulary
      IS_SUPPLEMENTED_BY:
        description: The resource supplements another resource.
        todos:
          - map to an ontology/vocabulary
      IS_CONTINUED_BY:
        description: The resource is continued by another resource.
        todos:
          - map to an ontology/vocabulary
      CONTINUES:
        description: The resource continues another resource.
        todos:
          - map to an ontology/vocabulary
      HAS_METADATA:
        description: The resource has metadata in another resource.
        todos:
          - map to an ontology/vocabulary
      IS_METADATA_FOR:
        description: The resource is metadata for another resource.
        todos:
          - map to an ontology/vocabulary
      HAS_VERSION:
        description: The resource has a version.
        meaning: dcterms:hasVersion
      IS_VERSION_OF:
        description: >-
          The resource is a version of another resource.
          This is useful to refer to an abstract resource that has different
          versions, for example, "Python 3.12 is a version of Python".
        meaning: dcterms:isVersionOf
      IS_NEW_VERSION_OF:
        description: The resource is a new version of.
        todos:
          - map to an ontology/vocabulary
      IS_PREVIOUS_VERSION_OF:
        description: The resource is a previous version of.
        todos:
          - map to an ontology/vocabulary
      IS_PART_OF:
        description: The resource is part of another resource.
        meaning: dcterms:isPartOf
      HAS_PART:
        description: The resource has part another resource.
        meaning: dcterms:hasPart
      IS_DESCRIBED_BY:
        description: The resource is documented by another resource.
        todos:
          - map to an ontology/vocabulary
      DESCRIBES:
        description: The resource documents another resource.
        todos:
          - map to an ontology/vocabulary
      IS_PUBLISHED_IN:
        description: The resource is published in another resource.
        todos:
          - map to an ontology/vocabulary
      IS_REFERENCED_BY:
        description: The resource is referenced by another resource.
        meaning: dcterms:isReferencedBy
      REFERENCES:
        description: The resource references another resource.
        todos:
          - map to an ontology/vocabulary
      IS_DOCUMENTED_BY:
        description: The resource is documented by another resource.
        todos:
          - map to an ontology/vocabulary
      DOCUMENTS:
        description: The resource documents another resource.
        todos:
          - map to an ontology/vocabulary
      IS_COMPILED_BY:
        description: The resource is compiled by another resource.
        todos:
          - map to an ontology/vocabulary
      COMPILES:
        description: The resource compiles another resource.
        todos:
          - map to an ontology/vocabulary
      IS_VARIANT_FORM_OF:
        description: The resource is variant form of another resource.
        todos:
          - map to an ontology/vocabulary
      IS_ORIGINAL_FORM_OF:
        description: The resource is original form of another resource.
        todos:
          - map to an ontology/vocabulary
      IS_IDENTICAL_TO:
        description: The resource is identical to another resource.
        todos:
          - map to an ontology/vocabulary
      IS_DERIVED_FROM:
        description: The resource is derived from another resource.
        todos:
          - map to an ontology/vocabulary
      IS_SOURCE_OF:
        description: The resource is source of another resource.
        todos:
          - map to an ontology/vocabulary
      IS_COLLECTED_BY:
        description: The resource is collected by another resource.
        todos:
          - map to an ontology/vocabulary
      COLLECTS:
        description: The resource collects another resource.
        todos:
          - map to an ontology/vocabulary
      IS_REQUIRED_BY:
        description: The resource is required by another resource.
        meaning: dcterms:isRequiredBy
        todos:
          - map to an ontology/vocabulary
      REQUIRES:
        description: The resource requires another resource.
        meaning: dcterms:requires
        todos:
          - map to an ontology/vocabulary
      IS_OBSOLETED_BY:
        description: >-
          The resource or PID4Cat is obsoleted by another resource or PID4Cat.
      OBSOLETES:
        description: The resource or PID4Cat obsoletes another resource or PID4Cat.
        todos:
          - map to an ontology/vocabulary

  PID4CatStatus:
    description: >-
      The status of the PID4CatRecord.
    permissible_values:
      SUBMITTED:
        description: The PID4CatRecord is reserved but the resource is not yet linked.
      REGISTERED:
        description: The PID4CatRecord links to a concrete resource.
      OBSOLETED:
        description: The PID4CatRecord is obsolete, e.g. because the resource is referenced by another PID4Cat.
      DEPRECATED:
        description: The PID4CatRecord is deprecated, e.g. because the resource can no longer be found.

  PID4CatAgentRole:
    description: >-
      The role of an agent relative to the resource.
    permissible_values:
      TRUSTEE:
        description: The agent is the trustee of the resource.
      OWNER:
        description: The agent is the owner of the resource.

  ChangeLogField:
    description: >-
      The field of the PID4Catrecord that was changed.
    permissible_values:
      STATUS:
        description: The status of the PID4CatRecord was changed.
      LANDING_PAGE:
        description: The URL of the landing page in the PID4CatRecord was changed.
      RESOURCE_INFO:
        description: The resource info of the PID4CatRecord was changed.
      RELATED_IDS:
        description: The related identifiers of the PID4CatRecord were changed.
      CONTACT:
        description: The contact information of the PID4CatRecord was changed.
      LICENSE:
        description: The license of the PID4CatRecord was changed.

  HandleDataType:
    description: >-
      The type of the handle record element.
    permissible_values:
      URL:
        description: The handle record element is of type URL.
      STATUS:
        description: The handle record element is of custom type STATUS.
      SCHEMA_VER:
        description: The handle record element is of type SCHEMA_VER.
      LICENSE:
        description: The handle record element is of type LICENSE.
      EMAIL:
        description: The handle record element is of type EMAIL.
      RESOURCE_INFO:
        description: The handle record element is of custom type JSON.
      RELATED:
        description: The handle record element is of custom type JSON.
      LOG:
        description: The handle record element is of custom type JSON.
